{"version":3,"sources":["components/Uploader.js","components/Tips.js","pages/Home.js"],"names":["Dragger","Upload","Wrapper","styled","div","HeaderWrapper","UploadWrapper","H1","h1","H3","h3","UploadWrapper2","Button","Upload2","ResultWrapper","H2","h2","Image","img","UploadTop","Close","Compenent","observer","useStores","ImageStore","UserStore","history","useHistory","ref1","useRef","ref2","useState","state","setState","t","useTranslation","store","useLocalStore","width","setWidth","height","setHeight","serverFile","attributes","url","widthStr","heightStr","toggle","event","console","log","stopPropagation","props","showUploadList","beforeUpload","file","setFile","setFilename","name","currentUser","message","warning","push","window","test","type","size","error","upload","then","catch","Header","tip","spinning","isUpLoading","icon","UploadOutlined","onClick","style","display","className","aria-hidden","xlinkHref","InboxOutlined","target","href","rel","filename","src","ref","onChange","current","value","placeholder","fullStr","Tips","Home","children","Uploader"],"mappings":"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","file":"static/js/8.65b0091b.chunk.js","sourcesContent":["import React,{useRef, useState} from 'react';\r\nimport { useStores } from './../stores/index';\r\nimport { observer, useLocalStore} from 'mobx-react'\r\nimport { message, Upload,Spin,Button} from 'antd';\r\nimport { InboxOutlined } from '@ant-design/icons';\r\nimport styled from 'styled-components';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { UploadOutlined } from '@ant-design/icons';\r\nimport Header from '../components/Header';\r\nimport \"../assets/upload.css\"\r\nimport {useTranslation} from 'react-i18next'\r\n\r\nconst { Dragger } = Upload;\r\n\r\n//总容器\r\nconst Wrapper = styled.div`\r\n`\r\n//头部\r\nconst HeaderWrapper = styled.div`\r\n        // border:1px solid red;\r\n        position: fixed;\r\n        top:0;\r\n        left:0;\r\n        width:100vw;\r\n`\r\n\r\n//展示容器\r\nconst UploadWrapper = styled.div`\r\n    text-align:center;\r\n    margin:30px auto;\r\n`\r\n//大标题\r\nconst H1 = styled.h1`\r\n    margin:0;\r\n    color:#fff;\r\n    text-align:center;\r\n    font-size:3em;\r\n    ling-height:120%;\r\n    font-weight:600;\r\n    text-shadow:1px 1px 2px rgba(0,0,0,.25);\r\n`\r\n//小标题\r\nconst H3 = styled.h3`\r\n    color:#fff;\r\n    font-family:Helvetica,Arial,sans-serif;\r\n    font-size:22px;\r\n    font-weight:100;\r\n    text-shadow:1px 1px 2px rgba(0,0,0,0.25);\r\n    text-align:center;\r\n`\r\n//按钮\r\nconst ButtonWrapper = styled(Button)`\r\n    margin-left:20px;\r\n`\r\n//上传总容器\r\nconst UploadWrapper2 = styled.div`\r\n    top:0px;\r\n    position: fixed;\r\n    left:0;\r\n    right:0;\r\n   \r\n`\r\n//上传容器\r\nconst Upload2 = styled.div`\r\n    .button{\r\n        display:flex;\r\n        justify-content:flex-end;\r\n    }\r\n    .ant-upload.ant-upload-drag{\r\n        border:none;\r\n    }\r\n   \r\n\r\n` \r\n//上传结果\r\nconst ResultWrapper = styled.div`\r\n    background: #fff;\r\n    padding:0;\r\n    text-align:center;\r\n`\r\n//上传结果标题\r\nconst H2 = styled.h2`\r\n    text-align:center;\r\n`\r\n//上传结果图片\r\nconst Image = styled.img`\r\n    max-width:300px;\r\n`\r\nconst UploadTop = styled.div`\r\n    display:flex;\r\n    // border:1px solid red;\r\n    justify-content:space-between;\r\n    padding:0 10px;\r\n`\r\n//关闭按钮\r\nconst Close = styled.div`\r\n\r\ndisplay:flex;\r\njustify-content:center;\r\n\r\n.icon{\r\n    margin:4px 2px 0 0;\r\n\r\n  width:15px;\r\n  height: 15px;\r\n\r\n  vertical-align: -0.15em;\r\n  fill: currentColor;\r\n  overflow: hidden;\r\n}\r\nspan{\r\n\r\n}\r\n`\r\nconst Compenent = observer(() => { \r\n    const { ImageStore, UserStore } = useStores()\r\n    const history = useHistory()\r\n    const ref1 = useRef()\r\n    const ref2 = useRef()\r\n    const [state,setState] = useState(false)\r\n    const {t} = useTranslation()\r\n    \r\n    const store = useLocalStore(() => ({\r\n        width: null,\r\n        setWidth(width) {\r\n            store.width = width\r\n        },\r\n        get widthStr() {\r\n            return store.width?`/w/${store.width}`:\"\"\r\n        },\r\n        height: null,\r\n        setHeight(height) {\r\n            store.height = height\r\n        },\r\n        get heightStr() {\r\n            return store.height?`/h/${store.height}`:\"\"\r\n        },\r\n        get fullStr() {\r\n            //?imageView2/0/w/800/h/400\r\n            return ImageStore.serverFile.attributes.url.attributes.url+'?imageView2/0'+store.widthStr+store.heightStr\r\n        }\r\n    }))\r\n    const toggle = (event) => {\r\n        console.log(event);\r\n        event.stopPropagation();//阻止冒泡\r\n        setState(!state)\r\n    }\r\n\r\n    const bindWidthChange = () => {\r\n        console.log('bindWidthChange');\r\n        console.log(ref1.current.value);\r\n        store.setWidth(ref1.current.value)\r\n    }\r\n\r\n    const bindHeightChange = () => {\r\n        console.log('bindHeightChange');\r\n        console.log(ref2.current.value);\r\n        store.setHeight(ref2.current.value)\r\n    }\r\n\r\n    const props = {\r\n        showUploadList:false,\r\n        beforeUpload: file => {\r\n\r\n            ImageStore.setFile(file)\r\n            ImageStore.setFilename(file.name)\r\n            if (UserStore.currentUser === null) {\r\n                message.warning('请先登录再上传')\r\n                history.push('/login')\r\n                return false\r\n            }\r\n            window.file = file\r\n            if (!/(svg$)|(png$)|(jpg$)|(jpeg$)|(git$)/ig.test(file.type)) {\r\n                message.error('只能上传png/svg/jpg/gif格式的图片')\r\n                return false\r\n            }\r\n            if (file.size > 1024 * 1024) {\r\n                message.error('图片最大1M')\r\n                return false\r\n            }\r\n            ImageStore.upload()\r\n                .then((serverFile) => {\r\n                    console.log('上传成功');\r\n                    console.log(serverFile);\r\n                }).catch(() => {\r\n                    console.log('上传失败');\r\n            })\r\n            return false\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Wrapper>\r\n            <HeaderWrapper>\r\n                <Header/>\r\n            </HeaderWrapper>\r\n            <UploadWrapper>\r\n               \r\n                <H1>{t('上传与分享您的照片')}</H1>\r\n                <H3>{t('imgup图床-高速稳定的图片上传和外链服务')}<br/>\r\n                    {t('任意拖放图片到这里，即可上传您的图片，最大20MB图片大小。')}<br/>\r\n                    {t('直接的源图片链接，HTML缩略图显示，禁止上传任何违法图片')}</H3>\r\n                <Spin tip=\"上传中\" spinning={ImageStore.isUpLoading}>\r\n\r\n                    <Upload {...props}>\r\n                            <Button icon={<UploadOutlined />} onClick={toggle}> {t('开始上传')}</Button> \r\n                    </Upload>\r\n\r\n                    {/* <ButtonWrapper icon={<UploadOutlined />} onClick={toggle}>拖拽上传</ButtonWrapper> */}\r\n                </Spin>\r\n                {/* <H3>本站已托管 16,429,429 张图片</H3> */}\r\n            </UploadWrapper>\r\n\r\n            <UploadWrapper2>\r\n                <Upload2 style={{display: state ? \"block\" : \"none\"}}>\r\n                    <Dragger {...props}>\r\n                            <UploadTop >\r\n                                <span>JPG PNG 10MB</span>\r\n                            <Close type=\"primary\" onClick={toggle} className=\"button\">\r\n                                <svg className=\"icon\" aria-hidden=\"true\">\r\n                                <use xlinkHref=\"#icon-guanbi1\"></use>\r\n                                </svg>\r\n                                <span>{t('关闭')}</span>\r\n                            </Close>\r\n                            </UploadTop>\r\n                            \r\n                            <p className=\"ant-upload-drag-icon\">\r\n                            <InboxOutlined />\r\n                            </p>\r\n                            <p className=\"ant-upload-text\">{t('单击或拖动文件到此区域以上载')}</p>\r\n                            <p className=\"ant-upload-hint\">\r\n                              {t('支持单次或批量上传。严禁上传公司资料或其他波段文件')}\r\n                            </p>\r\n                        </Dragger>\r\n                    </Upload2>\r\n               \r\n                {\r\n                    ImageStore.serverFile ?\r\n                        <ResultWrapper style={{display: state ? \"block\" : \"none\"}}>\r\n                             \r\n                            <H2>{t('上传结果')}</H2>\r\n                            <dl>\r\n                                <dt>{t('线上地址')}</dt>\r\n                                <dd>\r\n                                    <a target=\"_blank\" href={ImageStore.serverFile.attributes.url.attributes.url} rel=\"noopener noreferrer\"> \r\n                                        {ImageStore.serverFile.attributes.url.attributes.url}\r\n                                    </a>\r\n                                </dd>\r\n                                <dt>{t('文件名')}</dt>\r\n                                <dd>{ImageStore.filename}</dd>\r\n                                <dt>{t('图片预览')}</dt>\r\n                                <dd>\r\n                                    <Image src={ImageStore.serverFile.attributes.url.attributes.url} />\r\n                                </dd>\r\n                                <dt>{t('更多尺寸')}</dt>\r\n                                <dd>\r\n                                    <input ref={ref1} onChange={bindWidthChange} placeholder= {t('最大宽度（可选）')}\r\n                                />\r\n                                    <input ref={ref2}  onChange={bindHeightChange} placeholder={t('最大高度（可选）')} />\r\n                                </dd>\r\n                                <dd>\r\n                                    <a target=\"_blank\" href={store.fullStr} rel=\"noopener noreferrer\">{store.fullStr}</a>\r\n                                </dd>\r\n                            </dl>\r\n                        </ResultWrapper>\r\n                        : null\r\n               }\r\n            </UploadWrapper2>\r\n        </Wrapper>\r\n    )\r\n})\r\n\r\nexport default Compenent","import React, { useEffect } from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { useStores } from '../stores';\r\nimport styled from 'styled-components';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Tips = styled.div`\r\n    background:orange;\r\n    padding:10px;\r\n    margin:30px 0;\r\n    color:#fff;\r\n    border-radius:4px;\r\n`\r\n\r\nconst Component = observer(({ children }) => {\r\n    const { UserStore } = useStores()\r\n\r\n    return (\r\n        <>\r\n            {\r\n                UserStore.currentUser\r\n                    ?\r\n                    null\r\n                    :\r\n                   \r\n                    <Tips >{children}</Tips>\r\n            }\r\n        </>\r\n    )\r\n})\r\n\r\nexport default Component","import React from 'react'\r\nimport { observer } from 'mobx-react';\r\nimport Uploader from '../components/Uploader'\r\nimport Tips from '../components/Tips'\r\n\r\n\r\n\r\nconst Home = observer(() => {\r\n    \r\n    return (\r\n        <>\r\n            {/* {\r\n                <Tips>请先登录再上传！！！</Tips>\r\n\r\n            } */}\r\n            \r\n            \r\n            <Uploader/>\r\n            \r\n            \r\n        </>\r\n    )\r\n})\r\n\r\nexport default Home"],"sourceRoot":""}